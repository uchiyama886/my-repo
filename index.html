<!DOCTYPE html>
<html lang="ja">
    <head>
        <title>GitHub CI/CD実践ガイド</title>
        <meta charset="utf-8">
    </head>
    <body>
        <header>
            <p>「GitHub CI/CD実践ガイド」の中で出てきた知識類をまとめたものです。</p>
            <p>もし忘れてもこれを見返して思い出してください。</p>
            <hr>
        </header>
        <div>
            <div id="Section1">
                <h3>第1章 CI/CDとは</h3>
                <p>・CIは継続的インテグレーションであり、コードの変更を頻繁にコードベースに統合して正しい動作をするかを繰り返し検証する。</p>
                <p>・CDは継続的デリバリーであり、いつでも安全にリリースできる状態を保ってソフトウェアを繰り返し改善する。</p>
                <p>・CI/CDによってソフトウェア開発のビルド、テスト、リリースまでの流れを自動化することができる。</p>
            </div>
            <div id="Section1">
                <h3>第2章 GitHub Actionsについて</h3>
                <p>・ワークフロー単位でタスクを自動化する。</p>
                <p>・ワークフローファイルは「.yml」,「.yaml」拡張子を使う。</p>
                <p>・YAMLファイルは、「.github/workflow」ディレクトリ直下に配置する。</p>
                <p>・GitHub Actionsはワークフロー、ジョブ、ステップなどから構成され、イベントをトリガーに指定したランナーで起動する。またステップではシェルコマンドやアクショを実行できる。</p>
                <p>・アクションは再利用可能コンポーネントでGitHub Marketplace は検索に便利、Verified Creatorsは選択時の判断材料になる。</p>
            </div>
            <div id="Section1">
                <h3>第3章 GitHub Actionsの基本記法</h3>
                <p>・コンテキストやデフォルト環境変数からワークフロー実行時の情報などから取得可能。コンテキストの参照は中間環境変数を使うと便利。</p>
                <p>・ワークフロー間で共有する値はVariablesやSecretsで管理する。Secretsは暗号化されて、ログもマスクされる。</p>
                <p>・${{ <expression> }}といった記述を式と呼び、ワークフロー実行時に評価される。式ではリテラルや演算子、関数が利用でき、関数では文字列比較やJSON操作などが可能である。</p>
                <p>・条件分岐も可能で、エラー発生時の挙動も記述できる。</p>
                <p>・ステップ間でデータ共有をするにはGITHUB_OUTPUT環境変数やGITHUB_ENV環境変数を使う。前者はステップidを設定することで依存関係がわかりやすく、後者はステップidを設定する必要がないがグローバル変数になる、といった特徴がある。</p>
                <p>・GitHub APIはcurlコマンドなどのプログラムからプルリクエストへのコメントやラベル付与を、ワークフローで実行できる機能で、GITHUB_TOKENによる認証が必要。</p>
                <p>・GITHUB_TOKENはワークフロー実行時に発行され、アクセスを許可するリソースや操作はパーミッションで定義するが、自リポジトリ以外にはアクセスできない。</p>
                <p>・スターターワークフローには、便利なリファレンスが提供されている。</p>
            </div>
            <div id="Section1">
                <h3>第4章 CIの実践</h3>
                <p>・CIはプルリクエスト時に実行されることが多い。</p>
                <p>・テストワークフローの基本は、チェックアウト→言語セットアップ→テストの順。</p>
                <p>・フィルターやアクティビティタイプでワークフローの起動条件を制御可能。</p>
                <p>・静的解析はコードスキャンをして問題検出する、actionlintを使えば常に静的解析ができる。</p>
                <p>・タイムアウトはデフォルトで6時間のため、常に設定しておく。</p>
                <p>・シェルの指定はステップごとに可能。パイプエラーを拾うために常に定義するべき。</p>
                <p>・Concurrencyを使えば多重起動の抑制や自動キャンセルが可能。</p>
                <p>・CIの黄金律は、「クリーンに保つ」、「高速に実行する」,「ノイズを減らす」の３つ。</p>
                <p>・ユニットテストを中心に、フレーキーテストやフラジャイルテストの放置は御法度。</p>
                <p>・スローテストは実行タイミングをずらしてテストツールで実行時の挙動を制御する。</p>
                <p></p>
                <p></p>
            </div>
            <div id="Section1">
                <h3>第5章</h3>
            </div>
        </div>
    </body>
</html>